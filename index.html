<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <title>Sherlock Holmes ‚Äî Character Card</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; }
    :root {
      --bg-dark: #0a0a0f;
      --bg-card: rgba(15, 15, 25, 0.8);
      --accent: #00ff88;
      --accent-light: #39ff14;
      --accent-dim: #00cc6a;
      --text: #f0fff4;
      --text-muted: #b8d4be;
      --bg-gradient: linear-gradient(135deg, #0a0a0f 0%, #0d1f14 35%, #0a1520 70%, #0a0a0f 100%);
    }
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(28px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes shimmer {
      0% { background-position: 0% 50%; }
      100% { background-position: 200% 50%; }
    }
    html { scroll-behavior: smooth; }
    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      color: var(--text);
      background: var(--bg-gradient);
      background-attachment: fixed;
      line-height: 1.6;
      transition: background 0.4s ease, color 0.25s ease;
    }
    body.theme-light {
      --bg-dark: #e5e7eb;
      --bg-card: rgba(243, 244, 246, 0.9);
      --accent: #2563eb;
      --accent-light: #3b82f6;
      --accent-dim: #1d4ed8;
      --text: #0f172a;
      --text-muted: #4b5563;
      --bg-gradient: linear-gradient(135deg, #e5e7eb 0%, #d4d4d8 40%, #e5e7eb 100%);
    }
    .lang-switch {
      position: fixed;
      top: 1rem;
      right: 1.5rem;
      z-index: 10;
      display: flex;
      gap: 0.25rem;
      animation: fadeInUp 0.7s ease-out both;
    }
    .lang-switch button {
      padding: 0.4rem 0.75rem;
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--text-muted);
      background: rgba(10, 10, 15, 0.95);
      border: 1px solid rgba(0, 255, 136, 0.4);
      border-radius: 6px;
      cursor: pointer;
      transition: color 0.2s, border-color 0.2s, background 0.2s;
    }
    .lang-switch button:hover {
      color: var(--accent-light);
      border-color: var(--accent);
    }
    .lang-switch button.active {
      color: var(--accent-light);
      background: rgba(0, 255, 136, 0.15);
      border-color: var(--accent);
    }
    #theme-toggle {
      font-size: 0.9rem;
      padding-inline: 0.6rem;
    }
    .container {
      max-width: 720px;
      margin: 0 auto;
      padding: 2rem 1.5rem;
    }
    section {
      padding: 3rem 0;
      border-bottom: 1px solid rgba(0, 255, 136, 0.25);
    }
    section.hero { animation: fadeInUp 0.8s ease-out both; }
    section:last-of-type { border-bottom: none; }
    .hero {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 2rem;
    }
    .hero-text { flex: 1; min-width: 260px; }
    .hero-photo {
      flex-shrink: 0;
      width: 160px;
      height: 160px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid rgba(0, 255, 136, 0.6);
      box-shadow: 0 0 32px rgba(57, 255, 20, 0.25);
      animation: fadeInUp 0.65s ease-out 0.15s both;
    }
    h1 {
      font-size: clamp(2rem, 5vw, 2.75rem);
      font-weight: 700;
      margin: 0 0 0.5rem;
      background: linear-gradient(90deg, #39ff14, #00ff88, #00fff7, #39ff14, #00ff88);
      background-size: 200% 100%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: fadeInUp 0.65s ease-out 0.2s both, shimmer 5s ease-in-out 0.5s infinite;
    }
    .hero .subtitle {
      font-size: 1.15rem;
      color: var(--accent-light);
      margin: 0 0 1rem;
      font-weight: 500;
      animation: fadeInUp 0.65s ease-out 0.3s both;
    }
    .hero .desc {
      color: var(--text-muted);
      font-size: 1rem;
      max-width: 540px;
      margin: 0;
      animation: fadeInUp 0.65s ease-out 0.4s both;
    }
    h2 {
      font-size: 1.25rem;
      margin: 0 0 1rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      background: linear-gradient(90deg, #00ff88, #00fff7, #39ff14, #00ff88);
      background-size: 200% 100%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: shimmer 4s ease-in-out infinite;
    }
    .about p {
      margin: 0 0 1rem;
      color: var(--text-muted);
      font-size: 0.95rem;
    }
    .about p:last-child { margin-bottom: 0; }
    .contacts a {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--accent-light);
      text-decoration: none;
      margin-right: 1.5rem;
      margin-bottom: 0.75rem;
      font-size: 0.95rem;
      transition: color 0.25s ease, transform 0.2s ease;
      position: relative;
    }
    .contacts a::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: -2px;
      width: 0;
      height: 2px;
      background: linear-gradient(90deg, var(--accent), var(--accent-light));
      transition: width 0.25s ease;
    }
    .contacts a:hover {
      color: #7affb8;
      transform: translateX(4px);
    }
    .contacts a:hover::after {
      width: 100%;
    }
    .contacts .email { margin-bottom: 1rem; }
    .services-list { list-style: none; padding: 0; margin: 0; }
    .services-list li {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      flex-wrap: wrap;
      gap: 0.5rem;
      padding: 0.75rem 0;
      border-bottom: 1px solid rgba(0, 255, 136, 0.12);
      color: var(--text-muted);
      font-size: 0.95rem;
    }
    .services-list li:last-child { border-bottom: none; }
    .services-list .name { color: var(--text); font-weight: 500; }
    .services-list .price { color: var(--accent-light); white-space: nowrap; }
    .services-note { margin-top: 1rem; color: var(--text-muted); font-size: 0.875rem; }
    .visitor {
      margin-top: 1.25rem;
      font-size: 0.9rem;
      color: var(--text-muted);
    }
    .reveal {
      opacity: 0;
      transform: translateY(28px);
    }
    .reveal.visible {
      animation: fadeInUp 0.8s ease-out both;
    }
    .contact-form {
      padding-top: 2rem;
    }
    .contact-form form {
      background: var(--bg-card);
      border-radius: 12px;
      padding: 1.5rem 1.25rem;
      box-shadow: 0 18px 45px rgba(0, 0, 0, 0.35);
      border: 1px solid rgba(0, 255, 136, 0.18);
    }
    .contact-form .form-row {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      margin-bottom: 1rem;
    }
    .contact-form label {
      display: flex;
      flex-direction: column;
      flex: 1 1 200px;
      font-size: 0.85rem;
      color: var(--text-muted);
    }
    .contact-form input,
    .contact-form textarea {
      margin-top: 0.4rem;
      padding: 0.55rem 0.75rem;
      border-radius: 8px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: rgba(15, 23, 42, 0.65);
      color: var(--text);
      font: inherit;
      resize: vertical;
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s, background 0.2s;
    }
    body.theme-light .contact-form input,
    body.theme-light .contact-form textarea {
      background: rgba(255, 255, 255, 0.95);
    }
    .contact-form input:focus,
    .contact-form textarea:focus {
      border-color: var(--accent-light);
      box-shadow: 0 0 0 1px rgba(0, 255, 136, 0.4);
    }
    .contact-form textarea {
      min-height: 120px;
    }
    .form-error {
      min-height: 1.2rem;
      margin: 0.25rem 0 0.75rem;
      font-size: 0.8rem;
      color: #fca5a5;
    }
    .form-submit {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.6rem 1.4rem;
      border-radius: 999px;
      border: none;
      background: linear-gradient(90deg, var(--accent), var(--accent-light));
      color: #020617;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      box-shadow: 0 12px 30px rgba(0, 255, 136, 0.35);
      transition: transform 0.15s ease, box-shadow 0.15s ease, filter 0.15s ease;
    }
    .form-submit:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
      box-shadow: 0 18px 40px rgba(0, 255, 136, 0.45);
    }
    .form-submit:active {
      transform: translateY(0);
      box-shadow: 0 10px 24px rgba(0, 255, 136, 0.35);
    }
    @media (max-width: 480px) {
      .lang-switch { top: 0.75rem; right: 1rem; }
      .container { padding: 1.5rem 1rem; }
      section { padding: 2rem 0; }
      .hero { flex-direction: column; text-align: center; }
      .hero .desc { margin-left: auto; margin-right: auto; }
      .contacts a { margin-right: 1rem; }
    }
  </style>
</head>
<body class="theme-dark">
  <nav class="lang-switch" aria-label="Language and theme">
    <button type="button" data-lang="en" class="active">EN</button>
    <button type="button" data-lang="ru">RU</button>
    <button type="button" id="theme-toggle" aria-label="Toggle color theme">üåô</button>
  </nav>

  <div class="container">
    <section class="hero">
      <img
        class="hero-photo"
        src="sherlock-hero.png"
        alt="Sherlock Holmes"
        width="160"
        height="160"
      >
      <div class="hero-text">
        <h1 data-i18n="heroName">Sherlock Holmes</h1>
        <p class="subtitle" data-i18n="heroSubtitle">Consulting Detective</p>
        <p class="desc" data-i18n="heroDesc">Private detective based at 221B Baker Street, London. Renowned for observation, deduction, and solving the most baffling cases.</p>
        <p class="visitor" id="visitor-counter"></p>
      </div>
    </section>

    <section class="about reveal">
      <h2 data-i18n="aboutTitle">About</h2>
      <p data-i18n="about1">Sherlock Holmes is a fictional detective created by Sir Arthur Conan Doyle, first appearing in 1887. He is known for his sharp mind, mastery of disguise, and ability to draw conclusions from the smallest details. He lives at 221B Baker Street with his friend and chronicler Dr. John Watson.</p>
      <p data-i18n="about2">Holmes applies strict logic and scientific method to every case. He plays the violin, practices boxing and fencing, and has a deep knowledge of chemistry and forensic science. His methods of observation and deductive reasoning have made him one of the most famous characters in world literature.</p>
      <p data-i18n="about3">The character has been adapted countless times in film, television, and theatre. Holmes remains a symbol of intellect and the power of reason‚Äîand an enduring icon of the detective genre.</p>
    </section>

    <section class="services reveal">
      <h2 data-i18n="servicesTitle">Services &amp; Fees</h2>
      <ul class="services-list">
        <li><span class="name" data-i18n="s1name">Surveillance &amp; observation</span> <span class="price" data-i18n="s1price">from ¬£65/hour</span></li>
        <li><span class="name" data-i18n="s2name">Missing persons &amp; tracing</span> <span class="price" data-i18n="s2price">from ¬£350</span></li>
        <li><span class="name" data-i18n="s3name">Background &amp; due diligence</span> <span class="price" data-i18n="s3price">from ¬£150</span></li>
        <li><span class="name" data-i18n="s4name">Evidence &amp; alibi verification</span> <span class="price" data-i18n="s4price">from ¬£400</span></li>
        <li><span class="name" data-i18n="s5name">Confidential enquiries</span> <span class="price" data-i18n="s5price">by quotation</span></li>
      </ul>
      <p class="services-note" data-i18n="servicesNote">Final fee depends on complexity and urgency. Initial consultation by arrangement. Contact for a confidential discussion.</p>
    </section>

    <section class="contact-form reveal">
      <h2 data-i18n="formTitle">Write to me</h2>
      <form id="contact-form" novalidate>
        <div class="form-row">
          <label>
            <span data-i18n="formNameLabel">Name</span>
            <input type="text" id="form-name" name="name" autocomplete="name">
          </label>
          <label>
            <span data-i18n="formEmailLabel">Email</span>
            <input type="email" id="form-email" name="email" autocomplete="email">
          </label>
        </div>
        <label class="form-full">
          <span data-i18n="formMessageLabel">Message</span>
          <textarea id="form-message" name="message" rows="4"></textarea>
        </label>
        <p class="form-error" id="form-error" aria-live="polite"></p>
        <button type="submit" class="form-submit" data-i18n="formSubmit">Send</button>
      </form>
    </section>

    <section class="contacts reveal">
      <h2 data-i18n="contactsTitle">Contacts</h2>
      <p class="email"><a href="mailto:221b@bakerstreet.example">‚úâ <span data-i18n="contactsEmail">221b@bakerstreet.example</span></a></p>
      <a href="#">Telegram</a>
      <a href="#">Baker Street</a>
      <a href="#">Watson's Blog</a>
    </section>
  </div>

  <!-- Chatbot widget (cursor-ai-chatbot style, themed for site) -->
  <script>
    window.aiChatConfig = {
      consultantName: "Sherlock Holmes",
      chatTitle: "Consultation",
      chatTitleRu: "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è",
      welcomeMessage: "Good evening. I am at your service‚Äîask about our services, fees, or how to get in touch.",
      welcomeMessageRu: "–î–æ–±—Ä—ã–π –¥–µ–Ω—å. –ì–æ—Ç–æ–≤ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ–± —É—Å–ª—É–≥–∞—Ö, —Ü–µ–Ω–∞—Ö –∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö. –û —á—ë–º —Ö–æ—Ç–∏—Ç–µ —Å–ø—Ä–æ—Å–∏—Ç—å?",
      apiUrl: "/api/chat",
      primaryColor: "#00ff88"
    };
  </script>
  <style>
    #ai-chat-widget { position: fixed; bottom: 20px; right: 20px; z-index: 99999; font-family: inherit; }
    #ai-chat-toggle {
      width: 56px; height: 56px; border-radius: 50%;
      background: #00ff88; border: none; cursor: pointer;
      box-shadow: 0 0 24px rgba(0,255,136,0.4);
      display: flex; align-items: center; justify-content: center; transition: transform 0.2s;
    }
    #ai-chat-toggle:hover { transform: scale(1.08); }
    #ai-chat-toggle svg { width: 26px; height: 26px; fill: #0a0a0f; }
    #ai-chat-window {
      position: absolute; bottom: 70px; right: 0;
      width: 360px; max-height: 480px; background: #0d1117;
      border: 1px solid rgba(0,255,136,0.3); border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.4); display: none; flex-direction: column; overflow: hidden;
    }
    #ai-chat-window.open { display: flex; }
    .ai-chat-header {
      background: rgba(0,255,136,0.15); color: #00ff88; padding: 12px 16px;
      font-weight: 600; display: flex; justify-content: space-between; align-items: center;
    }
    .ai-chat-close { background: none; border: none; color: #00ff88; cursor: pointer; font-size: 22px; }
    .ai-chat-messages { flex: 1; overflow-y: auto; padding: 12px; display: flex; flex-direction: column; gap: 10px; min-height: 200px; }
    .ai-message { max-width: 90%; padding: 10px 14px; border-radius: 12px; font-size: 14px; line-height: 1.5; }
    .ai-message.user { background: rgba(0,255,136,0.25); color: #f0fff4; align-self: flex-end; border-bottom-right-radius: 4px; }
    .ai-message.assistant { background: rgba(15,15,25,0.9); color: #b8d4be; align-self: flex-start; border: 1px solid rgba(0,255,136,0.2); border-bottom-left-radius: 4px; }
    .ai-message.error { background: rgba(220,38,38,0.2); color: #fca5a5; font-size: 13px; }
    .ai-chat-input { padding: 12px; border-top: 1px solid rgba(0,255,136,0.2); display: flex; gap: 8px; }
    .ai-chat-input input {
      flex: 1; padding: 10px 14px; background: rgba(10,10,15,0.8); border: 1px solid rgba(0,255,136,0.3);
      border-radius: 20px; color: #f0fff4; font-size: 14px; outline: none;
    }
    .ai-chat-input input::placeholder { color: #6b7280; }
    .ai-chat-input input:focus { border-color: #00ff88; box-shadow: 0 0 0 2px rgba(0,255,136,0.2); }
    .ai-chat-input button {
      width: 42px; height: 42px; border-radius: 50%; background: #00ff88; border: none; cursor: pointer;
      display: flex; align-items: center; justify-content: center;
    }
    .ai-chat-input button:hover { background: #39ff14; }
    .ai-chat-input button:disabled { background: #4b5563; cursor: not-allowed; }
    .ai-chat-input button svg { width: 18px; height: 18px; fill: #0a0a0f; }
    .ai-typing { display: flex; gap: 4px; padding: 10px 14px; background: rgba(0,255,136,0.1); border-radius: 12px; width: fit-content; }
    .ai-typing span { width: 6px; height: 6px; background: #00ff88; border-radius: 50%; animation: chatTyping 1s infinite; }
    .ai-typing span:nth-child(2) { animation-delay: 0.15s; } .ai-typing span:nth-child(3) { animation-delay: 0.3s; }
    @keyframes chatTyping { 0%,60%,100% { opacity: 0.4; } 30% { opacity: 1; } }
    @media (max-width: 480px) { #ai-chat-window { width: calc(100vw - 32px); right: -8px; } }
  </style>
  <div id="ai-chat-widget">
    <div id="ai-chat-window">
      <div class="ai-chat-header">
        <span id="chat-title">Consultation</span>
        <button class="ai-chat-close" onclick="closeChat()">√ó</button>
      </div>
      <div class="ai-chat-messages" id="chat-messages"></div>
      <div class="ai-chat-input">
        <input type="text" id="user-message" placeholder="Type a message..." onkeypress="handleChatKeyPress(event)">
        <button id="send-btn" onclick="sendChatMessage()">
          <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
        </button>
      </div>
    </div>
    <button id="ai-chat-toggle" onclick="toggleChat()">
      <svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12z"/></svg>
    </button>
  </div>
  <script>
  (function() {
    var config = window.aiChatConfig || {};
    function getWelcome() {
      var lang = document.documentElement.lang || (localStorage.getItem('lang') || 'en');
      return lang === 'ru' ? (config.welcomeMessageRu || config.welcomeMessage) : config.welcomeMessage;
    }
    function updateChatTitle() {
      var lang = document.documentElement.lang || (localStorage.getItem('lang') || 'en');
      var el = document.getElementById('chat-title');
      if (el) el.textContent = lang === 'ru' ? (config.chatTitleRu || config.chatTitle) : config.chatTitle;
    }
    window.toggleChat = function() {
      var win = document.getElementById('ai-chat-window');
      win.classList.toggle('open');
      if (win.classList.contains('open')) {
        updateChatTitle();
        if (document.getElementById('chat-messages').children.length === 0)
          addChatMessage(getWelcome(), 'assistant');
      }
    };
    window.closeChat = function() { document.getElementById('ai-chat-window').classList.remove('open'); };
    window.handleChatKeyPress = function(e) { if (e.key === 'Enter') sendChatMessage(); };
    window.sendChatMessage = async function() {
      var input = document.getElementById('user-message');
      var message = input.value.trim();
      var sendBtn = document.getElementById('send-btn');
      if (!message) return;
      addChatMessage(message, 'user');
      input.value = '';
      sendBtn.disabled = true;
      var typingId = 'typing-' + Date.now();
      document.getElementById('chat-messages').insertAdjacentHTML('beforeend', '<div class="ai-typing" id="' + typingId + '"><span></span><span></span><span></span></div>');
      document.getElementById('chat-messages').scrollTop = 1e9;
      try {
        var base = window.location.origin;
        var res = await fetch((config.apiUrl && config.apiUrl.startsWith('http') ? config.apiUrl : base + config.apiUrl), {
          method: 'POST', headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: message })
        });
        document.getElementById(typingId) && document.getElementById(typingId).remove();
        if (!res.ok) {
          var err;
          try { err = await res.json(); } catch (_) { err = {}; }
          throw new Error(err && err.error ? err.error : ('Request failed (' + res.status + ')'));
        }
        var data;
        try {
          data = await res.json();
        } catch (_) {
          throw new Error('Unexpected server response');
        }
        if (data && data.response) {
          addChatMessage(data.response, 'assistant');
        } else {
          throw new Error('Empty server response');
        }
      } catch (err) {
        document.getElementById(typingId) && document.getElementById(typingId).remove();
        addChatMessage('Sorry, something went wrong. Please try again later.', 'error');
      }
      sendBtn.disabled = false;
    };
    function addChatMessage(text, role) {
      var container = document.getElementById('chat-messages');
      var div = document.createElement('div');
      div.className = 'ai-message ' + role;
      div.textContent = text;
      container.appendChild(div);
      container.scrollTop = container.scrollHeight;
    }
  })();
  </script>

  <script>
    var i18n = {
      en: {
        heroName: 'Sherlock Holmes',
        heroSubtitle: 'Consulting Detective',
        heroDesc: 'Private detective based at 221B Baker Street, London. Renowned for observation, deduction, and solving the most baffling cases.',
        aboutTitle: 'About',
        about1: 'Sherlock Holmes is a fictional detective created by Sir Arthur Conan Doyle, first appearing in 1887. He is known for his sharp mind, mastery of disguise, and ability to draw conclusions from the smallest details. He lives at 221B Baker Street with his friend and chronicler Dr. John Watson.',
        about2: 'Holmes applies strict logic and scientific method to every case. He plays the violin, practices boxing and fencing, and has a deep knowledge of chemistry and forensic science. His methods of observation and deductive reasoning have made him one of the most famous characters in world literature.',
        about3: "The character has been adapted countless times in film, television, and theatre. Holmes remains a symbol of intellect and the power of reason‚Äîand an enduring icon of the detective genre.",
        contactsTitle: 'Contacts',
        contactsEmail: '221b@bakerstreet.example',
        servicesTitle: 'Services & Fees',
        s1name: 'Surveillance & observation',
        s1price: 'from ¬£65/hour',
        s2name: 'Missing persons & tracing',
        s2price: 'from ¬£350',
        s3name: 'Background & due diligence',
        s3price: 'from ¬£150',
        s4name: 'Evidence & alibi verification',
        s4price: 'from ¬£400',
        s5name: 'Confidential enquiries',
        s5price: 'by quotation',
        servicesNote: 'Final fee depends on complexity and urgency. Initial consultation by arrangement. Contact for a confidential discussion.',
        chatTitle: 'Consultation',
        chatPlaceholder: 'Type a message...',
        formTitle: 'Write to me',
        formNameLabel: 'Name',
        formEmailLabel: 'Email',
        formMessageLabel: 'Message',
        formSubmit: 'Send',
        formErrorRequired: 'Please fill in all the fields.',
        formErrorEmail: 'Please enter a valid email address.',
        formSuccess: 'Thank you, {name}! Your message has been noted.'
      },
      ru: {
        heroName: '–®–µ—Ä–ª–æ–∫ –•–æ–ª–º—Å',
        heroSubtitle: '–ß–∞—Å—Ç–Ω—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç-–¥–µ—Ç–µ–∫—Ç–∏–≤',
        heroDesc: '–ß–∞—Å—Ç–Ω—ã–π –¥–µ—Ç–µ–∫—Ç–∏–≤ —Å —Ä–µ–∑–∏–¥–µ–Ω—Ü–∏–µ–π –Ω–∞ –ë–µ–π–∫–µ—Ä-—Å—Ç—Ä–∏—Ç, 221–ë, –õ–æ–Ω–¥–æ–Ω. –ò–∑–≤–µ—Å—Ç–µ–Ω –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é, –¥–µ–¥—É–∫—Ü–∏–µ–π –∏ —Ä–∞–∑–≥–∞–¥–∫–æ–π —Å–∞–º—ã—Ö –∑–∞–ø—É—Ç–∞–Ω–Ω—ã—Ö –¥–µ–ª.',
        aboutTitle: '–û —Å–µ–±–µ',
        about1: '–®–µ—Ä–ª–æ–∫ –•–æ–ª–º—Å ‚Äî –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ê—Ä—Ç—É—Ä–æ–º –ö–æ–Ω–∞–Ω –î–æ–π–ª–æ–º –∏ –≤–ø–µ—Ä–≤—ã–µ –ø–æ—è–≤–∏–≤—à–∏–π—Å—è –≤ 1887 –≥–æ–¥—É. –ò–∑–≤–µ—Å—Ç–µ–Ω –æ—Å—Ç—Ä—ã–º —É–º–æ–º, –∏—Å–∫—É—Å—Å—Ç–≤–æ–º –ø–µ—Ä–µ–≤–æ–ø–ª–æ—â–µ–Ω–∏—è –∏ —É–º–µ–Ω–∏–µ–º –¥–µ–ª–∞—Ç—å –≤—ã–≤–æ–¥—ã –∏–∑ –º–µ–ª—å—á–∞–π—à–∏—Ö –¥–µ—Ç–∞–ª–µ–π. –ñ–∏–≤—ë—Ç –Ω–∞ –ë–µ–π–∫–µ—Ä-—Å—Ç—Ä–∏—Ç, 221–ë, –≤–º–µ—Å—Ç–µ —Å –¥—Ä—É–≥–æ–º –∏ –ª–µ—Ç–æ–ø–∏—Å—Ü–µ–º –¥–æ–∫—Ç–æ—Ä–æ–º –î–∂–æ–Ω–æ–º –í–∞—Ç—Å–æ–Ω–æ–º.',
        about2: '–•–æ–ª–º—Å –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∫ –∫–∞–∂–¥–æ–º—É –¥–µ–ª—É —Å—Ç—Ä–æ–≥—É—é –ª–æ–≥–∏–∫—É –∏ –Ω–∞—É—á–Ω—ã–π –º–µ—Ç–æ–¥. –ò–≥—Ä–∞–µ—Ç –Ω–∞ —Å–∫—Ä–∏–ø–∫–µ, –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –±–æ–∫—Å–æ–º –∏ —Ñ–µ—Ö—Ç–æ–≤–∞–Ω–∏–µ–º, –≥–ª—É–±–æ–∫–æ –∑–Ω–∞–µ—Ç —Ö–∏–º–∏—é –∏ –∫—Ä–∏–º–∏–Ω–∞–ª–∏—Å—Ç–∏–∫—É. –ï–≥–æ –º–µ—Ç–æ–¥—ã –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∏ –¥–µ–¥—É–∫—Ü–∏–∏ —Å–¥–µ–ª–∞–ª–∏ –µ–≥–æ –æ–¥–Ω–∏–º –∏–∑ —Å–∞–º—ã—Ö –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –º–∏—Ä–æ–≤–æ–π –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã.',
        about3: '–ü–µ—Ä—Å–æ–Ω–∞–∂ –±–µ—Å—á–∏—Å–ª–µ–Ω–Ω–æ —ç–∫—Ä–∞–Ω–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è –∏ —Å—Ç–∞–≤–∏–ª—Å—è –≤ —Ç–µ–∞—Ç—Ä–µ. –•–æ–ª–º—Å –æ—Å—Ç–∞—ë—Ç—Å—è —Å–∏–º–≤–æ–ª–æ–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ –∏ —Å–∏–ª—ã —Ä–∞–∑—É–º–∞ ‚Äî –∏ –æ–¥–Ω–æ–π –∏–∑ –≥–ª–∞–≤–Ω—ã—Ö –∏–∫–æ–Ω –¥–µ—Ç–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∂–∞–Ω—Ä–∞.',
        contactsTitle: '–ö–æ–Ω—Ç–∞–∫—Ç—ã',
        contactsEmail: '221b@bakerstreet.example',
        servicesTitle: '–£—Å–ª—É–≥–∏ –∏ —Ü–µ–Ω—ã',
        s1name: '–ù–∞–±–ª—é–¥–µ–Ω–∏–µ –∏ —Å–ª–µ–∂–∫–∞',
        s1price: '–æ—Ç 15 000 ‚ÇΩ/–¥–µ–Ω—å',
        s2name: '–ü–æ–∏—Å–∫ –ª—é–¥–µ–π, —Ä–æ–∑—ã—Å–∫',
        s2price: '–æ—Ç 35 000 ‚ÇΩ',
        s3name: '–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏—á–Ω–æ—Å—Ç–∏ –∏ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏',
        s3price: '–æ—Ç 20 000 ‚ÇΩ',
        s4name: '–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–ª–∏–±–∏, —Å–±–æ—Ä –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤',
        s4price: '–æ—Ç 30 000 ‚ÇΩ',
        s5name: '–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è',
        s5price: '–ø–æ –∑–∞–ø—Ä–æ—Å—É',
        servicesNote: '–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ —Å—Ä–æ—á–Ω–æ—Å—Ç–∏. –ü–µ—Ä–≤–∏—á–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–æ –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏. –°–≤—è–∂–∏—Ç–µ—Å—å –¥–ª—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ –æ–±—Å—É–∂–¥–µ–Ω–∏—è.',
        chatTitle: '–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è',
        chatPlaceholder: '–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...',
        formTitle: '–ù–∞–ø–∏—Å–∞—Ç—å –º–Ω–µ',
        formNameLabel: '–ò–º—è',
        formEmailLabel: 'Email',
        formMessageLabel: '–°–æ–æ–±—â–µ–Ω–∏–µ',
        formSubmit: '–û—Ç–ø—Ä–∞–≤–∏—Ç—å',
        formErrorRequired: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è.',
        formErrorEmail: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∞–¥—Ä–µ—Å email.',
        formSuccess: '–°–ø–∞—Å–∏–±–æ, {name}! –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ (–ø–æ–∫–∞ –±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏).'
      }
    };

    var currentLang = localStorage.getItem('lang') || 'en';
    var currentTheme = localStorage.getItem('theme') || 'dark';
    var visitorCount = 0;

    function setLang(lang) {
      currentLang = lang;
      localStorage.setItem('lang', lang);
      document.querySelectorAll('[data-i18n]').forEach(function(el) {
        var key = el.getAttribute('data-i18n');
        if (i18n[lang] && i18n[lang][key]) el.textContent = i18n[lang][key];
      });
      document.querySelectorAll('.lang-switch button').forEach(function(btn) {
        btn.classList.toggle('active', btn.getAttribute('data-lang') === lang);
      });
      document.documentElement.lang = lang === 'ru' ? 'ru' : 'en';
      var titleEl = document.getElementById('chat-title');
      var inputEl = document.getElementById('user-message');
      if (titleEl && i18n[lang].chatTitle) titleEl.textContent = i18n[lang].chatTitle;
      if (inputEl && i18n[lang].chatPlaceholder) inputEl.placeholder = i18n[lang].chatPlaceholder;
      updateVisitorText();
    }

    function applyTheme(theme) {
      currentTheme = theme;
      localStorage.setItem('theme', theme);
      document.body.classList.toggle('theme-light', theme === 'light');
      document.body.classList.toggle('theme-dark', theme === 'dark');
      var btn = document.getElementById('theme-toggle');
      if (btn) {
        btn.textContent = theme === 'light' ? '‚òÄÔ∏è' : 'üåô';
        btn.setAttribute('aria-label', theme === 'light' ? 'Switch to dark theme' : 'Switch to light theme');
      }
    }

    function initTheme() {
      applyTheme(currentTheme);
      var toggle = document.getElementById('theme-toggle');
      if (toggle) {
        toggle.addEventListener('click', function() {
          applyTheme(currentTheme === 'dark' ? 'light' : 'dark');
        });
      }
    }

    function initScrollReveal() {
      var elements = document.querySelectorAll('.reveal');
      if (!('IntersectionObserver' in window)) {
        elements.forEach(function(el) { el.classList.add('visible'); });
        return;
      }
      var observer = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.25 });
      elements.forEach(function(el) { observer.observe(el); });
    }

    function updateVisitorText() {
      var el = document.getElementById('visitor-counter');
      if (!el || !visitorCount) return;
      if (currentLang === 'ru') {
        el.textContent = '–í—ã ' + visitorCount + '-–π –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—å';
      } else {
        el.textContent = 'You are visitor #' + visitorCount;
      }
    }

    function initVisitorCounter() {
      var el = document.getElementById('visitor-counter');
      if (!el) return;
      var raw = localStorage.getItem('visitorCount');
      var n = parseInt(raw || '0', 10);
      if (!isFinite(n) || n < 0) n = 0;
      n += 1;
      visitorCount = n;
      localStorage.setItem('visitorCount', String(n));
      updateVisitorText();
    }

    function initContactForm() {
      var form = document.getElementById('contact-form');
      if (!form) return;
      var nameInput = document.getElementById('form-name');
      var emailInput = document.getElementById('form-email');
      var msgInput = document.getElementById('form-message');
      var errorEl = document.getElementById('form-error');
      var emailRe = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;

      form.addEventListener('submit', function(e) {
        e.preventDefault();
        var name = (nameInput.value || '').trim();
        var email = (emailInput.value || '').trim();
        var msg = (msgInput.value || '').trim();
        var dict = i18n[currentLang];
        errorEl.textContent = '';

        if (!name || !email || !msg) {
          errorEl.textContent = dict.formErrorRequired;
          return;
        }
        if (!emailRe.test(email)) {
          errorEl.textContent = dict.formErrorEmail;
          return;
        }
        alert(dict.formSuccess.replace('{name}', name));
        form.reset();
      });
    }

    document.querySelectorAll('.lang-switch button').forEach(function(btn) {
      btn.addEventListener('click', function() {
        setLang(this.getAttribute('data-lang'));
      });
    });

    setLang(currentLang);
    initTheme();
    initScrollReveal();
    initVisitorCounter();
    initContactForm();
  </script>
</body>
</html>
